<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core" xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd">
	<sub-flow name="implementation-find-clima-main" doc:id="da27a2f2-808f-45d4-bd38-8b7d79fad22e" >
		<flow-ref doc:name="Flow Buscar dados tratados" doc:id="eff3b618-b94c-4265-9960-ab6a505588b2" name="implementation-BuscarDados-Tratamento"/>
		<flow-ref doc:name="Flow Clima calc" doc:id="7f7944bb-85fd-46e0-bf94-14b43fa863ad" name="implementation-find-clima-calc"/>
	</sub-flow>
	<sub-flow name="implementation-find-clima-calc" doc:id="942ee6d2-579e-451e-bd6e-04083edf086d" >
		<try doc:name="Try" doc:id="438a2960-c359-431f-893d-1250b0306195" >
			<ee:transform doc:name="Calcula Clima" doc:id="f05e2c2d-52c4-466a-81ac-cc8f07cd440b" >
				<ee:message >
					<ee:set-payload ><![CDATA[%dw 2.0
output application/json

---

vars.dadosFiltrados.previsao filter ((item, index) -> upper(item.condicao) == upper(vars.Param_clima))
]]></ee:set-payload>
				</ee:message>
			</ee:transform>
			<error-handler >
				<on-error-continue enableNotifications="true" logException="true" doc:name="On Error Continue" doc:id="8fd4e5ec-d2ef-4e99-b6f3-8ff64753d8b7" >
					<ee:transform doc:name="Transform Message" doc:id="574d2612-301e-4a11-aca2-79fdbd86c8e5" >
						<ee:message >
							<ee:set-payload ><![CDATA[%dw 2.0
output application/json
---
{
	mensagem: error.description
}]]></ee:set-payload>
						</ee:message>
					</ee:transform>
				</on-error-continue>
			</error-handler>
		</try>
	</sub-flow>
</mule>
